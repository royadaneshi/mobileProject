Index: app/src/main/java/com/edufire/dic3/SearchActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.edufire.dic3;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.Html;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.edufire.dic3.Models.APIResponse;\r\nimport com.edufire.dic3.Models.Definitions;\r\nimport com.edufire.dic3.Models.Meanings;\r\nimport com.edufire.dic3.Models.Phonetics;\r\nimport com.edufire.dic3.Models.User;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.ml.common.modeldownload.FirebaseModelDownloadConditions;\r\nimport com.google.firebase.ml.naturallanguage.FirebaseNaturalLanguage;\r\nimport com.google.firebase.ml.naturallanguage.translate.FirebaseTranslateLanguage;\r\nimport com.google.firebase.ml.naturallanguage.translate.FirebaseTranslator;\r\nimport com.google.firebase.ml.naturallanguage.translate.FirebaseTranslatorOptions;\r\n\r\nimport java.util.List;\r\n\r\npublic class SearchActivity extends AppCompatActivity {\r\n\r\n    Spinner spinnerFrom,spinnerTarget;\r\n    String baseLanguage,targetLanguage;\r\n    EditText text;\r\n    TextView translation;\r\n    Button submit;\r\n    User user ;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_search);\r\n\r\n        user = User.getAllUsers().get(getIntent().getStringExtra(\"userName\"));\r\n\r\n        spinnerFrom = findViewById(R.id.spinner_search_from);\r\n        spinnerTarget = findViewById(R.id.spinner_search_target);\r\n        text = findViewById(R.id.txt_search_text);\r\n        submit = findViewById(R.id.btn_search_submit);\r\n        translation = findViewById(R.id.txt_search_result);\r\n\r\n        translation.setVisibility(View.INVISIBLE);\r\n\r\n        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,R.array.languages, android.R.layout.simple_spinner_item);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spinnerFrom.setAdapter(adapter);\r\n        spinnerTarget.setAdapter(adapter);\r\n\r\n        spinnerFrom.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> parent, View view, int i, long l) {\r\n                baseLanguage = parent.getItemAtPosition(i).toString();\r\n                Log.d(baseLanguage, \"onItemSelected-base: \");\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n        spinnerTarget.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Log.d(\"in\", \"in\");\r\n                targetLanguage = adapterView.getItemAtPosition(i).toString();\r\n                Log.d(targetLanguage, \"onItemSelected-target: \");\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n\r\n        submit.setOnClickListener(new View.OnClickListener() {\r\n            @SuppressLint(\"SetTextI18n\")\r\n            @Override\r\n            public void onClick(View view) {\r\n                if (user != null && user.canUserRequest()){\r\n                    if (text.getText().toString().equals(\"\")){\r\n                        Toast.makeText(getParent(),\"please fill text field\", Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        if (baseLanguage.equals(targetLanguage)){\r\n                            Intent intent = new Intent(SearchActivity.this,TranslationActivity.class);\r\n                            intent.putExtra(\"text\",text.getText().toString());\r\n                            intent.putExtra(\"userName\",user.getUsername());\r\n                            startActivity(intent);\r\n                        }else{\r\n                            translation.setVisibility(View.VISIBLE);\r\n                            String response = translateText(getLanguageCode(baseLanguage.toString()),getLanguageCode(targetLanguage),text.getText().toString());\r\n                            response.replace(\"\\r\",\"\");\r\n                            translation.setText(response);\r\n                        }\r\n                        user.increaseLimitRequestCounter();\r\n                    }\r\n                } else{\r\n                    Toast.makeText(SearchActivity.this,\"You have reached your limit please buy premium plan to continue\",Toast.LENGTH_LONG).show();\r\n//                    Intent intent = new Intent(SearchActivity.this,PremiumActivity.class);\r\n//                    intent.putExtra(\"username\",user.getUsername());\r\n//                    startActivity(intent);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public String translateText(int fromLanguageCode, int toLanguageCode, String source) {\r\n        final String[] answer = {\"\"};\r\n        FirebaseTranslatorOptions options = new FirebaseTranslatorOptions.Builder()\r\n                .setSourceLanguage(fromLanguageCode)\r\n                .setTargetLanguage(toLanguageCode)\r\n                .build();\r\n        FirebaseTranslator translator = FirebaseNaturalLanguage.getInstance().getTranslator(options);\r\n        FirebaseModelDownloadConditions conditions = new FirebaseModelDownloadConditions.Builder().build();\r\n        translator.downloadModelIfNeeded(conditions).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void unused) {\r\n                translator.translate(source).addOnSuccessListener(new OnSuccessListener<String>() {\r\n                    @Override\r\n                    public void onSuccess(String s) {\r\n                        System.out.println(s);\r\n                        answer[0] = s;\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        System.out.println(\"Failed to translate\");\r\n                    }\r\n                });\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                System.out.println(\"Fail to download the model!++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\");\r\n            }\r\n        });\r\n\r\n        return answer[0];\r\n    }\r\n\r\n    public int getLanguageCode(String language) {\r\n        int languageCode;\r\n        switch (language) {\r\n            case \"English\":\r\n                languageCode = FirebaseTranslateLanguage.EN;\r\n                break;\r\n            case \"Afrikaans\":\r\n                languageCode = FirebaseTranslateLanguage.AF;\r\n                break;\r\n            case \"Arabic\":\r\n                languageCode = FirebaseTranslateLanguage.AR;\r\n                break;\r\n            case \"Belarusian\":\r\n                languageCode = FirebaseTranslateLanguage.BE;\r\n                break;\r\n            case \"Czech\":\r\n                languageCode = FirebaseTranslateLanguage.CS;\r\n                break;\r\n            case \"Hindi\":\r\n                languageCode = FirebaseTranslateLanguage.HI;\r\n                break;\r\n            default:\r\n                languageCode = 0;\r\n        }\r\n        return languageCode;\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/edufire/dic3/SearchActivity.java b/app/src/main/java/com/edufire/dic3/SearchActivity.java
--- a/app/src/main/java/com/edufire/dic3/SearchActivity.java	(revision 8bdbb0ebf9dcc00643893907253540d4f685ff02)
+++ b/app/src/main/java/com/edufire/dic3/SearchActivity.java	(date 1659006773650)
@@ -6,7 +6,6 @@
 import android.annotation.SuppressLint;
 import android.content.Intent;
 import android.os.Bundle;
-import android.text.Html;
 import android.util.Log;
 import android.view.View;
 import android.widget.AdapterView;
@@ -17,10 +16,6 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
-import com.edufire.dic3.Models.APIResponse;
-import com.edufire.dic3.Models.Definitions;
-import com.edufire.dic3.Models.Meanings;
-import com.edufire.dic3.Models.Phonetics;
 import com.edufire.dic3.Models.User;
 import com.google.android.gms.tasks.OnFailureListener;
 import com.google.android.gms.tasks.OnSuccessListener;
@@ -30,8 +25,6 @@
 import com.google.firebase.ml.naturallanguage.translate.FirebaseTranslator;
 import com.google.firebase.ml.naturallanguage.translate.FirebaseTranslatorOptions;
 
-import java.util.List;
-
 public class SearchActivity extends AppCompatActivity {
 
     Spinner spinnerFrom,spinnerTarget;
@@ -101,10 +94,8 @@
                             intent.putExtra("userName",user.getUsername());
                             startActivity(intent);
                         }else{
-                            translation.setVisibility(View.VISIBLE);
-                            String response = translateText(getLanguageCode(baseLanguage.toString()),getLanguageCode(targetLanguage),text.getText().toString());
-                            response.replace("\r","");
-                            translation.setText(response);
+//                            String response = translateText(getLanguageCode(baseLanguage.toString()),getLanguageCode(targetLanguage),text.getText().toString());
+                             translateText(getLanguageCode(baseLanguage.toString()),getLanguageCode(targetLanguage),text.getText().toString());
                         }
                         user.increaseLimitRequestCounter();
                     }
@@ -120,7 +111,7 @@
 
     }
 
-    public String translateText(int fromLanguageCode, int toLanguageCode, String source) {
+    public void translateText(int fromLanguageCode, int toLanguageCode, String source) {
         final String[] answer = {""};
         FirebaseTranslatorOptions options = new FirebaseTranslatorOptions.Builder()
                 .setSourceLanguage(fromLanguageCode)
@@ -134,7 +125,9 @@
                 translator.translate(source).addOnSuccessListener(new OnSuccessListener<String>() {
                     @Override
                     public void onSuccess(String s) {
-                        System.out.println(s);
+//                        System.out.println(s);
+                        translation.setText(s);
+                        translation.setVisibility(View.VISIBLE);
                         answer[0] = s;
                     }
                 }).addOnFailureListener(new OnFailureListener() {
@@ -150,8 +143,6 @@
                 System.out.println("Fail to download the model!++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
             }
         });
-
-        return answer[0];
     }
 
     public int getLanguageCode(String language) {
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_main.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_main_menu.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_register.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_search.xml\" value=\"0.35520833333333335\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_translation.xml\" value=\"0.72\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/content_register.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/fragment_first.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/fragment_first_page.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/fragment_register.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/fragment_second.xml\" value=\"0.3692708333333333\" />\r\n        <entry key=\"..\\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/fragment_user_menu.xml\" value=\"0.35520833333333335\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/group_add.xml\" value=\"0.2365\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/menu_back.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/menu_back_state.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/menu_item_padding.xml\" value=\"0.2385\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/red15.xml\" value=\"0.1995\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_black10.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_black20.xml\" value=\"0.2385\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_green10.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_light_yellow10.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_red10.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_white10.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/round_back_white_stroke2_10.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/drawable/setting.xml\" value=\"0.1585\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_admin.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_game.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_game_result.xml\" value=\"0.19067977768277042\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_group.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_main.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_main_menu.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_premium.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_register.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_search.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_translation.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/activity_word.xml\" value=\"0.21822916666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/app_bar_main.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/fragment_first_page.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/fragment_group_add.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/fragment_groups.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/fragment_request_group.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/fragment_setting.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/fragment_words_in_database.xml\" value=\"0.23229166666666667\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/group_cardview.xml\" value=\"0.20909090909090908\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/my_header.xml\" value=\"0.18974358974358974\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/my_row.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/layout/nav_header.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/MP_Project/mobileProject/app/src/main/res/menu/menu.xml\" value=\"0.1\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 8bdbb0ebf9dcc00643893907253540d4f685ff02)
+++ b/.idea/misc.xml	(date 1658997614000)
@@ -3,6 +3,7 @@
   <component name="DesignSurface">
     <option name="filePathToZoomLevelMap">
       <map>
+        <entry key="..\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_admin.xml" value="0.3692708333333333" />
         <entry key="..\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_main.xml" value="0.3692708333333333" />
         <entry key="..\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_main_menu.xml" value="0.3692708333333333" />
         <entry key="..\:/Education/SUT/Spring-00-01/mobile programming/final-project/app/src/main/res/layout/activity_register.xml" value="0.3692708333333333" />
